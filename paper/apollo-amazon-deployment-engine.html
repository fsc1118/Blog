<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Dr Werner Vogels - https://www.allthingsdistributed.com/"><title>The Story of Apollo - Amazon’s Deployment Engine | All Things Distributed</title><meta name=description content="Werner Vogels on building scalable and robust distributed systems"><meta name=generator content="Hugo 0.101.0"><meta name=twitter:card content="summary"><meta name=twitter:image content="/images/wvlogo.jpg"><meta name=twitter:title content="The Story of Apollo - Amazon’s Deployment Engine"><meta name=twitter:description content="Automated deployments are the backbone of a strong DevOps environment. Without efficient, reliable, and repeatable software updates, engineers need to redirect their focus from developing new features to managing and debugging their deployments. Amazon first faced this challenge many years ago.
When making the move to a service-oriented architecture, Amazon refactored its software into small independent services and restructured its organization into small autonomous teams. Each team took on full ownership of the development and operation of a single service, and they worked directly with their customers to improve it."><meta property="og:title" content="The Story of Apollo - Amazon’s Deployment Engine"><meta property="og:description" content="Automated deployments are the backbone of a strong DevOps environment. Without efficient, reliable, and repeatable software updates, engineers need to redirect their focus from developing new features to managing and debugging their deployments. Amazon first faced this challenge many years ago.
When making the move to a service-oriented architecture, Amazon refactored its software into small independent services and restructured its organization into small autonomous teams. Each team took on full ownership of the development and operation of a single service, and they worked directly with their customers to improve it."><meta property="og:type" content="article"><meta property="og:url" content="https://www.allthingsdistributed.com/2014/11/apollo-amazon-deployment-engine.html"><meta property="og:image" content="https://www.allthingsdistributed.com/images/wvlogo.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-11-12T16:00:00+00:00"><meta property="article:modified_time" content="2014-11-12T16:00:00+00:00"><meta itemprop=name content="The Story of Apollo - Amazon’s Deployment Engine"><meta itemprop=description content="Automated deployments are the backbone of a strong DevOps environment. Without efficient, reliable, and repeatable software updates, engineers need to redirect their focus from developing new features to managing and debugging their deployments. Amazon first faced this challenge many years ago.
When making the move to a service-oriented architecture, Amazon refactored its software into small independent services and restructured its organization into small autonomous teams. Each team took on full ownership of the development and operation of a single service, and they worked directly with their customers to improve it."><meta itemprop=datePublished content="2014-11-12T16:00:00+00:00"><meta itemprop=dateModified content="2014-11-12T16:00:00+00:00"><meta itemprop=wordCount content="908"><meta itemprop=image content="https://www.allthingsdistributed.com/images/wvlogo.jpg"><meta itemprop=keywords content><link rel=canonical href=https://www.allthingsdistributed.com/2014/11/apollo-amazon-deployment-engine.html><link rel=alternate type=application/atom+xml title="All Things Distributed" href=https://www.allthingsdistributed.com/atom.xml><link rel="shortcut icon" type=image/png href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="><link rel="shortcut icon" href=https://www.allthingsdistributed.com/favicon.ico type=image/x-icon><link rel=icon href=https://www.allthingsdistributed.com/favicon.ico type=image/x-icon><style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeSpeed}.posts hr{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:none;border-bottom:1px #353535;flex:1 0 1rem}main{max-width:70ch;padding:2ch;margin:auto}a,body{color:#353535}::selection,a:focus,a:hover{background-color:#353535;color:#fff}.meta{margin:0 0 2.5rem}.tags::before{content:"\2022";margin-left:1rem}code,pre{color:#353535;font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;border:1px solid #353535;font-size:small}code{padding:.1rem;border:none}pre{padding:.5rem;overflow-x:auto}pre code{border:none}img{max-width:100%;border:0 solid #353535;display:block;margin-left:auto;margin-right:auto}hr{background:#353535;height:1px;border:0}ul{list-style-type:square}ul,ol{padding-left:1.2rem}header li,footer li{display:inline;text-transform:uppercase;padding:5px}header a,footer a{text-decoration:none}header ul,footer ul{justify-content:space-between;display:flex}header{padding:0}section,footer{padding:1rem 0}blockquote{border-left:5px solid #353535;padding-left:1rem}figure{max-width:100%;border:0 solid #353535;display:block;margin-left:auto;margin-right:auto}figcaption{color:#606060;font-style:italic;text-align:center;font-size:.9rem;margin-right:20px;margin-left:20px}.posts ul,header ul,footer ul{list-style:none}.posts,header ul,footer ul{padding:0}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.7rem}.posts li a,.posts li div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.hash{opacity:.25;text-decoration:none}table{border-collapse:collapse;text-align:left;width:100%}table tr{background:#fff;border-bottom:1px solid}table th,table td{padding:10px 20px}.titlecenter{padding-top:1rem;text-align:center;font-size:32px;font-weight:600}.subtitlecenter{padding-bottom:1rem;text-align:center;font-style:italic;font-size:18px;font-weight:400}.quote{background-color:#f0f0f0;display:flex;padding:20px}.quote svg{font-size:24px;color:#ce8460;margin-right:20px}.quote p{font-style:italic}.quote-by{color:#ce8460}.embed-container{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%}.embed-container iframe,.embed-container object,.embed-container embed{position:absolute;top:0;left:0;width:100%;height:100%}.card{box-shadow:0 2px 2px 2px rgba(0,0,0,.2)}.card:hover{box-shadow:none}.card:hover .card-text{background-color:#353535;color:#fff}a.card-link{text-decoration:none}.card-text{padding:2px 16px;display:grid;align-items:stretch;color:#353535}.column{float:left;width:33.3%;padding:0 10px}.column a{text-decoration:none}.row{margin:0 -5px}.row:after{content:"";display:table;clear:both}@media screen and (max-width:70ch){.column{width:100%;display:block;margin-bottom:20px}}.topnav{overflow:hidden;display:flex;justify-content:space-between}.topnav a{float:left;text-align:center;padding:5px;text-decoration:none;text-transform:uppercase}.topnav .icon{display:none}@media screen and (max-width:700px){.topnav a:not(:first-child){display:none}.topnav a.icon{float:right;display:flex}}@media screen and (max-width:700px){.topnav.responsive{position:relative;display:block}.topnav.responsive .icon{position:absolute;right:0;top:0}.topnav.responsive a{float:none;display:block;text-align:left}}</style><script src=//rum-static.pingdom.net/pa-6214eea09034fb0011000850.js async></script>
<script src=https://cdn.usefathom.com/script.js data-site=LVXGFGWH defer></script>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"The Story of Apollo - Amazon’s Deployment Engine","headline":"The Story of Apollo - Amazon’s Deployment Engine","alternativeHeadline":"","description":"Automated deployments are the backbone of a strong DevOps environment. Without efficient, reliable, and repeatable software updates, engineers need to redirect their focus from developing new features to managing and debugging their deployments. Amazon first faced this challenge many years ago.\nWhen making the move to a service-oriented architecture, Amazon refactored its software into small independent services and restructured its organization into small autonomous teams. Each team took on full ownership of the development and operation of a single service, and they worked directly with their customers to improve it.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.allthingsdistributed.com\/2014\/11\/apollo-amazon-deployment-engine.html"},"author":{"@type":"Person","name":"Werner Vogels"},"creator":{"@type":"Person","name":"Werner Vogels"},"accountablePerson":{"@type":"Person","name":"Werner Vogels"},"copyrightHolder":"All Things Distributed","copyrightYear":"2014","dateCreated":"2014-11-12T16:00:00.00Z","datePublished":"2014-11-12T16:00:00.00Z","dateModified":"2014-11-12T16:00:00.00Z","publisher":{"@type":"Organization","name":"All Things Distributed","url":"https://www.allthingsdistributed.com/","logo":{"@type":"ImageObject","url":"https:\/\/www.allthingsdistributed.com\/images\/wvlogo.jpg","width":"32","height":"32"}},"image":"https://www.allthingsdistributed.com/images/wvlogo.jpg","url":"https:\/\/www.allthingsdistributed.com\/2014\/11\/apollo-amazon-deployment-engine.html","wordCount":"908","genre":[],"keywords":[]}</script><script src=https://kit.fontawesome.com/3dc06e990d.js crossorigin=anonymous></script></head><body><main><header><div class=topnav id=myTopnav><a href=/ onclick='fathom.trackGoal("GI2IBXWI",0)' class=active>All Things Distributed</a>
<a href=/now-go-build.html onclick='fathom.trackGoal("BRNEL55F",0)'>Now Go Build!</a>
<a href=/articles.html onclick='fathom.trackGoal("SNEZORYY",0)'>Articles</a>
<a href=/about.html onclick='fathom.trackGoal("RJDV08GK",0)'>@werner</a>
<a href=https://www.allthingsdistributed.com/atom.xml onclick='fathom.trackGoal("P4UTBXOR",0)'><i class="fas fa-rss"></i></a>
<a href=javascript:void(0); class=icon onclick=myFunction()><i class="fa fa-bars"></i></a></ul></div><script>function myFunction(){var e=document.getElementById("myTopnav");e.className==="topnav"?e.className+=" responsive":e.className="topnav"}</script></header><hr><section><h2 itemprop="name headline">The Story of Apollo - Amazon’s Deployment Engine</h2><p class=meta><time itemprop=datePublished datetime=2014-11-12>November 12, 2014</time> &bull; 908 words</p><span itemprop=articleBody><p>Automated deployments are the backbone of a strong DevOps environment. Without efficient, reliable, and repeatable software updates, engineers need to redirect their focus from developing new features to managing and debugging their deployments. Amazon first faced this challenge many years ago.</p><p>When making the move to a service-oriented architecture, Amazon refactored its software into small independent services and restructured its organization into small autonomous teams. Each team took on full ownership of the development and operation of a single service, and they worked directly with their customers to improve it. With this clear focus and control, the teams were able to quickly produce new features, but their deployment process soon became a bottleneck. Manual deployment steps slowed down releases and introduced bugs caused by human error. Many teams started to fully automate their deployments to fix this, but that was not as simple as it first appeared.</p><p>Deploying software to a single host is easy. You can SSH into a machine, run a script, get the result, and you’re done. The Amazon production environment, however, is more complex than that. Amazon web applications and web services run across large fleets of hosts spanning multiple data centers. The applications cannot afford any downtime, planned or otherwise. An automated deployment system needs to carefully sequence a software update across a fleet while it is actively receiving traffic. The system also requires the built-in logic to correctly respond to the many potential failure cases.</p><p>It didn’t make sense for each of the small service teams to duplicate this work, so Amazon created a shared internal deployment service called Apollo. Apollo’s job was to reliably deploy a specified set of software across a target fleet of hosts. Developers could define their software setup process for a single host, and Apollo would coordinate that update across an entire fleet of hosts. This made it easy for developers to “push-button” deploy their application to a development host for debugging, to a staging environment for tests, and finally to production to release an update to customers. The added efficiency and reliability of automated deployments removed the bottleneck and enabled the teams to rapidly deliver new features for their services.</p><p>Over time, Amazon has relied on and dramatically improved Apollo to fuel the constant stream of improvements to our web sites and web services. Thousands of Amazon developers use Apollo each day to deploy a wide variety of software, from Java, Python, and Ruby apps, to HTML web sites, to native code services. In the past 12 months alone, Apollo was used for 50M deployments to development, testing, and production hosts. That’s an average of more than one deployment each second.</p><p>The extensive use of Apollo inside Amazon has driven the addition of many valuable features. It can perform a rolling update across a fleet where only a fraction of the hosts are taken offline at a time to be upgraded, allowing an application to remain available during a deployment. If a fleet is distributed across separate data centers, Apollo will stripe the rolling update to simultaneously deploy to an equivalent number of hosts in each location. This keeps the fleet balanced and maximizes redundancy in the case of any unexpected events. When the fleet scales up to handle higher load, Apollo automatically installs the latest version of the software on the newly added hosts.</p><p>Apollo also tracks the detailed deployment status on individual hosts, and that information is leveraged in many scenarios. If the number of failed host updates crosses a configurable threshold, Apollo will automatically halt a deployment before it affects the application availability. On the next deployment, such as a quick rollback to the prior version, Apollo will start updating these failed hosts first, thus bringing the whole fleet to a healthy state as quickly as possible. Developers can monitor ongoing deployments and view their history to answer important questions like “When was this code deployed into production, and which hosts are currently running it?” or “What version of the application was running in production last week?”</p><p>Many of our customers are facing similar issues as they increase the rate of their application updates. They’ve asked us how we do it, because they want to optimize their processes to achieve the same rapid delivery. Since automated deployments are a fundamental requirement for agile software delivery, we created a new service called <a href=http://aws.amazon.com/codedeploy>AWS CodeDeploy</a>.</p><p>CodeDeploy allows you to plug in your existing application setup logic, and then configure the desired deployment strategy across your fleets of EC2 instances. CodeDeploy will take care of orchestrating the fleet rollout, monitoring the status, and giving you a clear dashboard to control and track all of your deployments. It simplifies and standardizes your software release process so that developers can focus on what they do best –building new features for their customers. Jeff Barr’s blog post includes a great walkthrough of using CodeDeploy, and is a good place to start to gain a deeper understanding of the service.</p><p>AWS CodeDeploy is the first in a set of ALM services designed to help customers build a productive cloud development process. We look forward to sharing more about the internal processes and tools that Amazon uses for agile software delivery. Apollo is just one piece of a larger set of solutions. We’d like to hear about the ways that you think we can help improve your delivery process, so please connect directly with the product team on the CodeDeploy forum.</p></span></section><hr><footer><nav><ul><li>© 2023 All Things Distributed</li><li><a href=https://twitter.com/werner><i class="fab fa-twitter"></i></a>&nbsp;&nbsp;
<a href="https://www.youtube.com/playlist?list=PLhr1KZpdzukdIpgzSSCkNsnRAwDz6Xx5B"><i class="fab fa-youtube"></i></a>&nbsp;&nbsp;
<a href=https://instagram.com/djwerner><i class="fab fa-instagram"></i></a>&nbsp;&nbsp;
<a href=https://www.allthingsdistributed.com/atom.xml onclick='fathom.trackGoal("0CNLQXYM",0)'><i class="fas fa-rss"></i></a></li></ul></nav></footer></main></body></html>